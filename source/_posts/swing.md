---
title: 一阶倒立摆
date: 2024-03-31 20:26:20
updated: 2024-03-31 20:26:20
type:
categories:
- 解决方案
- 电赛
top_img:
cover: 
---
倒立摆作为经典的控制问题

可以拆解成两项
起摆跟立摆
起摆的逻辑并不难分析，只需要保证杆在左侧时候滑块右拉，右侧左拉即可完成起摆

难点在于立摆
立摆涉及到摆角度与位置的控制
角度环保持摆直立，位置环保证摆不乱走

如果只闭一个角度环，可以立摆，但是不能纠正摆的位置，立摆之后会朝一个方向猛冲，造成电机追不上摆的假象。如果连立摆都做不到可能是电机转速太慢，

这时候就需要考虑闭第二个环。两个环控制涉及到串并级，以及控制周期的问题。

我们最早是做的并级，角度环位置环共同控制摆，但是效果并不理想。角度环调大了位置环没作用，位置环调大了不能立摆。
最后换了串级，角度环作为内环，用位置环返回的数字区修正角度的输入值。效果很显著，摆开始震荡，解决了摆猛冲的问题。
但是这时候摆震荡并不收敛，我们直接在摆第一次震荡之前，手动修正角度值，让他提前返回。这样便使摆在一个固定范围内震荡。

当时摆控制周期为0.1ms，角度环中断周期是0.5ms 位置环为5ms，后来才发现这应该是个错误。
首先定时器能不能达到0.1ms的精度，这是有待商榷的。
其次摆的控制周期小于角度环的输出周期，这是非常不合理的，理论上应该是控制周期小于角度环的输出周期。但是最后没什么影响，以后要注意这一点。

感觉分析问题，解决问题的能力有待提高




中间还涉及数据采集误差的问题，比如电位器突变等，能在硬件上解决的问题就不要代码解决。
